<template>
     <ion-range :class="tone"
        id="slider"
        :value="rangeVal"
        min="0"
        max="9"
        step="1"
        debounce="100"
        @ionChange="rangeChange($event)">

         <ion-icon 
                v-if="subIsDisabled===false"
                slot="start" :icon="removeCircle"
                @click="buttonRangeChange('sub')"
        ></ion-icon>
        <ion-icon v-else
                slot="start" :icon="removeCircle"
                class="disabled">
        </ion-icon>
         <ion-icon 
                 v-if="addIsDisabled===false"
                slot="end" :icon="addCircle"
                @click="buttonRangeChange('add')"
                ></ion-icon>
           <ion-icon v-else
                slot="end" :icon="addCircle"
                class="disabled">
        </ion-icon>
        </ion-range>
</template>

<script>

import { IonRange, IonIcon } from '@ionic/vue';
import { addCircle, removeCircle } from 'ionicons/icons'

export default {

    props: ['tone', 'sliderVal'],
    emits: ['update:moodCount'],
//you might need to look at the 'watcheffect' stuff
    components: {
        IonRange,
        IonIcon
    },

    setup() {

        return {
            addCircle, 
            removeCircle,
        }
    },

    data() {
        return {
            rangeVal: 0,
            subIsDisabled: true,
            addIsDisabled: false,
        }
    },

    methods: {

        rangeChange(event) {
                this.rangeVal = event.target.value;
                this.$emit('update:moodCount', this.rangeVal);
                
                // console.log(this.rangeVal);
            },

        buttonRangeChange(type) {

        if(type==="add") {
            this.rangeVal++
        } else if (type==="sub") {
            this.rangeVal--
        } else {
            console.log('rangeval, something went wrong')
        }
        },
    },

    watch: {

        sliderVal() {
            this.rangeVal--
        },

        rangeVal() {
             if(this.rangeVal<=0){
                this.subIsDisabled=true
                console.log('disabled style applied')
            } else {
                this.subIsDisabled=false
            }

            if(this.rangeVal>=9){
                this.addIsDisabled=true
                } else {
                this.addIsDisabled=false
                }
            },
        },
}
</script>

<style scoped>

    ion-range {
    --knob-size: 3rem;
    }
    ion-range.angry {
    --knob-background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 193.75 174.55'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%23ec0927;%7D.b,.i%7Bfill:%23292323;%7D.c%7Bfill:%23ef221e;%7D.d%7Bfill:%238e0604;%7D.e%7Bfill:%23fcfdfd;%7D.f,.g,.h%7Bfill:%231a1818;%7D.g,.h,.i%7Bstroke:%231a1818;stroke-linecap:round;stroke-linejoin:round;%7D.g%7Bstroke-width:0.5px;%7D.h,.i%7Bstroke-width:3px;%7D%3C/style%3E%3C/defs%3E%3Cpath class='a' d='M192.17,84.79c0,21.16-9.1,45.14-24.09,59.83-17.61,17.25-43.33,23.47-72,23.47-38.89,0-63.59-5.28-78.71-34.08C11.87,123.51,0,97.08,0,84.79,0,61.79,10.75,41,28.14,25.9s41.41-24.4,68-24.4c35.16,0,65.9,16.37,82.65,40.8A74.74,74.74,0,0,1,192.17,84.79Z'/%3E%3Cpath class='b' d='M46.81,161l7.86,3.86A13.05,13.05,0,0,1,46.81,161Z'/%3E%3Cpath class='c' d='M155.4,157.08l3.51-1.87Z'/%3E%3Cpath class='c' d='M149.35,159.86l2.45-1.17Z'/%3E%3Cpath class='c' d='M145.14,161.6l2.55-1Z'/%3E%3Cpath class='b' d='M39.69,156.63c1.21,0,2.34,0,2.56,1.58Z'/%3E%3Cpath class='b' d='M36.26,154.81l1.48.8Z'/%3E%3Cpath class='b' d='M161.08,24.33l-1.55-1Z'/%3E%3Cpath class='b' d='M28,26.22l-.88.71Z'/%3E%3Cpath class='b' d='M28.84,25.55l-.67.55Z'/%3E%3Cpath class='b' d='M159.51,23.34l-.89-.64Z'/%3E%3Cpath class='c' d='M131.31,8.15l-1.47-.65Z'/%3E%3Cpath class='b' d='M38,155.73a.46.46,0,0,1,.48.25C38.22,156.09,38.07,156,38,155.73Z'/%3E%3Cpath class='c' d='M153.57,157.93l0-.2c.15,0,.19.19.19.33Z'/%3E%3Cpath class='b' d='M42.61,158.37c.18.1.34.12.07.26Z'/%3E%3Cpath class='b' d='M44,159.3l.87.55Z'/%3E%3Cpath class='b' d='M45.53,160.28h0Z'/%3E%3Cpath class='b' d='M57.65,165.75l1.4.47Z'/%3E%3Cpath class='b' d='M59.89,166.46l.86.29Z'/%3E%3Cpath class='d' d='M34.32,153.73c2.79-20.91,26.37,5.67,37.9,3.77,60.6,13.06,105.36-17,116.35-79C192.37,161.31,95.18,196.78,34.32,153.73Z'/%3E%3Cpath class='e' d='M6.22,102.86l.13.09Z'/%3E%3Cpath class='f' d='M133,119.09c.09,9.67-10.54,17-19.2,12.11-10.67-6.11-23.59-1-34.32,2.53-12.23,2.16-25.26-8.5-21.85-21.49C63.93,87.16,136.17,86.59,133,119.09Zm-11.78,7.33c9.2-.91,8.16-14.3,3-19.3-7.22,6.34-.72,11.84-3.13,19.62ZM73.45,109.24c3.77-.62,6.3,1.83,2.55,4.61-2.08.45-3,1.36-2.22,3.75,1.06,3.45,1.65,7,2.49,10.78,13.13-3.26,27.83-9.12,41-1.19,4.85-11-7.56-8.29-4.81-16,7.34,3.51,9.31-9.63.41-10.56-14.28-5.85-27.94-.35-41.82,3.63.63,2.4,2.43,3.78.89,5.5ZM70.87,127.4c-2.21-7.82-.47-14.47-3.75-21.61C59.52,111.73,60.1,125.11,70.87,127.4Z'/%3E%3Cpath class='d' d='M104.28,55.29c15.45-7.8,58.75-4.19,30.65-27a23.27,23.27,0,0,0-7.61-.33c-4,.55-19.6,15.42-23,18.43s-13.93,1-19.54-.72S64.5,28.15,62.06,27s-8.73,1.26-8.73,1.26c-5.92,3.17-20.09,7.71-11.51,16C53.69,29.52,73.88,52.2,84.74,56.34c3.73,1.43,12.51,4.64,19.54-1.05'/%3E%3Cpath class='d' d='M101.67,59.72C95.79,80.78,114.46,78.12,129,78.33c19.75,1.34,24.87-9.06,23.2-27.31,8.68,6.79,2,19.85-1,28.13-5.83,12.74-42.72,8.63-53.07,2.5,2.22-1.81,2.22-1.81.08-3.66C98.75,71.89,96.41,64.27,101.67,59.72Z'/%3E%3Cpath class='d' d='M40.83,49.42c-9.31,31.44,22.91,35.14,43.55,23.7,4.63,16.27-58.44,20-51.63-1.67C34.44,64.89,34,52.38,40.83,49.42Z'/%3E%3Cpath class='f' d='M135.39,27.86c3.06,5.62-3.42,5.41-6.95,7.41C123.1,37.94,106,60,104.28,46.36,106,37.29,117.59,33.54,123.45,27,127.46,22.53,131.51,24.18,135.39,27.86Z'/%3E%3Cpath class='f' d='M84.74,45.64C79,56.46,65.55,34.62,63,28.64c-3.32.55-6.7,3.48-9.23-.81C63.31,11.49,79.39,37.1,84.74,45.64Z'/%3E%3Cpath class='f' d='M99.08,77.69c4.65,6.33-13.25,5.56-11.94.42C89.16,74,97,74.78,99.08,77.69Z'/%3E%3Cpath class='f' d='M94.47,62.71c.56-1.77-.51-5.13,1.87-6C99.43,55.7,94.63,73.89,94.47,62.71Z'/%3E%3Cpath class='f' d='M90.49,62.38c0-10.6,3.46-2.55,2.21,3.47C90.7,65.36,90.8,63.74,90.49,62.38Z'/%3E%3Cpath class='d' d='M85.7,70.49l.42-1.12Z'/%3E%3Cpath class='e' d='M111.5,114.66c5.75,3.93,8.15,4.76,5.77,12.53-13.17-7.93-27.86-2.07-41,1.19.26-4.47-5.89-12.82-.27-14.54C87.92,113.23,99.83,110.15,111.5,114.66Z'/%3E%3Cpath class='e' d='M72.72,108.55l-1.67-4.29c9.7-1.61,18.5-7.54,28.47-6.18C106.8,99.27,125,100,116.8,111.34c-7.12-.86-16.62-1.68-21.81-7C92.36,110.18,78,109.9,72.72,108.55Z'/%3E%3Cpath class='b' d='M77.73,109.52c5.64-2,14.37,1.37,17.26-5.13,4.05,5.49,11.73,3.88,17.47,6.8l-1,3.47c-11.67-4.51-23.58-1.43-35.5-.82C77.78,112.88,77.9,111.25,77.73,109.52Z'/%3E%3Cpath class='d' d='M70.87,127.4c-10.76-2.29-11.35-15.67-3.75-21.61C70.4,112.93,68.66,119.57,70.87,127.4Z'/%3E%3Cpath class='d' d='M121.3,126.46c1.83-7.84-4.08-13,2.94-19.34,5.18,5,6.22,18.39-3,19.3Z'/%3E%3Cpath class='b' d='M72.72,108.55l.73.69-1.51.52Z'/%3E%3Cpath class='b' d='M114.21,111.58l2.59-.24C116,112.52,115.17,112.51,114.21,111.58Z'/%3E%3Cpath class='d' d='M121.26,126.42l-.15.32C121.15,126.64,121.35,126.51,121.26,126.42Z'/%3E%3Cpath class='e' d='M44.28,55.49C46,35.64,71.2,56.13,79.84,61c-1.16,6.14-1.23,11.72-8.94,11.08-7.92-.16-22.47,5.31-25-5.4l-.06.1C67.62,74.87,60,38.52,44.28,55.49Z'/%3E%3Cpath class='c' d='M44.28,55.49c16.07-16.8,23.31,19.4,1.06,11.39l.58-.2c-.24,2.49,2.15,3.69,3.51,5.41C40.78,70.7,45,61.5,44.28,55.49Zm4,5c-.55,4.75,7.1,2.54,6.86-.72C54.72,55.24,47.91,55,48.31,60.47Z'/%3E%3Cpath class='c' d='M54.33,73.4c10.36-1.82,26,2.87,25.51-12.4C89.06,74.16,62.63,76.58,54.33,73.4Z'/%3E%3Cpath class='e' d='M118.76,55.55c10.09-.39,18.18-6.85,28.56-5.74.31,7.53,2.35,18.18-4.29,22.66-10.09,2.21-29.4,6.39-35.71-2.13C118.26,75.47,128.38,64.25,118.76,55.55Z'/%3E%3Cpath class='c' d='M118.76,55.55c9.63,8.71-.51,19.92-11.44,14.79,0,.19-.11.84-.19,1.49C102.27,63.75,107.93,51.78,118.76,55.55Zm-4.53,12.09c5.44.33,5.33-8.06.69-8.55C108.89,58.87,107.46,67.84,114.23,67.64Z'/%3E%3Cpath class='f' d='M48.31,60.47c-.4-5.52,6.41-5.23,6.86-.71C55.41,63,47.76,65.22,48.31,60.47Z'/%3E%3Cpath class='e' d='M45.92,66.68l-.58.2C45.53,66.82,45.82,66.89,45.92,66.68Z'/%3E%3Cpath class='f' d='M114.23,67.64c-6.77.2-5.34-8.78.69-8.55C119.56,59.58,119.67,68,114.23,67.64Z'/%3E%3Cpath class='g' d='M42.28,43.85c11.3-14,24.85,4.15,36.77,7.85,11,2.21,8.69,13.51,5.33,21.42C60.44,87,23.7,76.32,42.28,43.85Zm12,29.55c8.3,3.2,34.73.75,25.52-12.4-6.32-4.79-39.31-25.65-35.57-5.52C43.77,65,42.2,72.46,54.33,73.4Z'/%3E%3Cpath class='g' d='M102.27,58.52c3.92-9.77,32.82-11.38,43.5-15.25,10.91,4.94,8.5,31-2.28,34.43C127.41,79.92,92.42,86.29,102.27,58.52Zm4.86,14.31c10.82,5.45,24.55,3.79,35.9.67,6.65-4.65,4.59-15.66,4.29-23.46-10.38-1.15-18.47,5.53-28.56,5.94C107.93,52.08,102.27,64.47,107.13,72.83Z'/%3E%3Cpath class='h' d='M149.35,159.86a110.64,110.64,0,0,1-104,.41h.2c-.91-.43-1.73-1.25-2.67-1.78-.21-.22-.54.06-.61-.29-.45-2.29-3.08-1.28-4.51-2.6-.58-.31-1.15-.64-1.74-.93l-5.25-4.52C59.44,161,93.39,177.66,125.88,165c15-8.22,36.49-10.6,44.81-27,9.25-18.5,18.93-37.26,18.14-58.53,13.47,9.71-16,76.52-35.06,78.4l-.16-.1C152.53,158.67,150.67,159.05,149.35,159.86Z'/%3E%3Cpath class='h' d='M28.84,25.55C64.35-8,121.69-4.3,159.53,23.35c.57.36,1.13.73,1.7,1.07,3.23,8.81-6.78.23-10.33-1.19C111.25-2.56,59.77,1.65,25.44,34.19c.58-2.4,1-4.89,1.68-7.26.35-.27.69-.57,1.05-.83Z'/%3E%3Cpath class='i' d='M27.08,27q-.82,3.62-1.64,7.22l0-.1C-.69,64.68-3.86,125,32.79,149.36l-2,.8L36,154.68C-9.11,134.39-6.58,55.24,27.08,27Z'/%3E%3Cpath class='i' d='M160.9,28.91c2.46-1.33.27-3,.33-4.49,20.85,11.91,31,38.93,30.94,62-.92-2.62.47-8-3.83-7C184.25,60.56,177.64,40.2,160.9,28.91Z'/%3E%3C/svg%3E");
    }

    ion-range.polite {
    --knob-background: var(--ion-color-polite);
    }

    ion-range.paggro {
    --knob-background: var(--ion-color-paggro);
    }

    ion-range.pirate {
    --knob-background: var(--ion-color-pirate);
    }

    ion-icon {
        font-size: 24px;
    }

    .disabled {
    color: grey!important;
    }
</style>